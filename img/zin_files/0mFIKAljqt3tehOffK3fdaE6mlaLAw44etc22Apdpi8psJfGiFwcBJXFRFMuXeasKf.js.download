if (self.CavalryLogger) { CavalryLogger.start_js(["AhV2xM9"]); }

__d("MessengerOutlineEntityTextNode",["Outline","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var d=a.prototype;d.getEntity=function(){throw c("unrecoverableViolation")("CometMessengerOutlineEntityTextNode does not implement getEntity","messenger_comet")};return a}(d("Outline").TextNode);function a(a){return a instanceof h}g.MessengerOutlineEntityTextNode=h;g.isMessengerOutlineEntityTextNode=a}),98);
__d("MessengerOutlineActorNode",["MessengerOutlineEntityTextNode"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.replace(" name","");a=a.replace(" nickname","");return a}var i=function(b){babelHelpers.inheritsLoose(a,b);a.getType=function(){return"actor"};a.clone=function(b){return new a({id:b.__contactID,text:b.__text.slice(1)},b.__key)};function a(a,c){var d=a.id;a=a.text;a=b.call(this,"@"+a,c)||this;a.__contactID=h(d);return a}var c=a.prototype;c.createDOM=function(a){a=b.prototype.createDOM.call(this,a);a.className="bnpdmtie diy96o5h";a.spellcheck=!1;return a};c.getEntity=function(){return{id:this.__contactID,isWeak:!1}};return a}(d("MessengerOutlineEntityTextNode").MessengerOutlineEntityTextNode);function a(a){return new i(a).makeSegmented().makeDirectionless()}function b(a){return a instanceof i}g.MessengerOutlineActorNode=i;g.createMessengerOutlineActorNode=a;g.isMessengerOutlineActorNode=b}),98);
__d("useCometOutlineComposition",["react","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useState;function a(a){var b=h(!1),d=b[0],e=b[1];c("useLayoutEffect_SAFE_FOR_SSR")(function(){var b=function(){e(!0)},c=function(){e(!1)};return a.addListener("root",function(a,d){d!==null&&(d.removeEventListener("compositionstart",b),d.removeEventListener("compositionend",c)),a!==null&&(a.addEventListener("compositionstart",b),a.addEventListener("compositionend",c))})},[a]);return d}g["default"]=a}),98);
__d("MWV2ChatComposerGetViewContent",["MessengerOutlineEntityTextNode","Outline"],(function(a,b,c,d,e,f,g){"use strict";a={getRanges:function(a){var b=[],c=0;a.getEditorState().read(function(a){a=a.getRoot().getFirstChild();a instanceof d("Outline").ElementNode&&a.getChildren().forEach(function(a){if(d("MessengerOutlineEntityTextNode").isMessengerOutlineEntityTextNode(a)){var e=a.getEntity();b.push({id:e.id,length:a.getTextContent().length,offset:c,type:"p"})}c+=a.getTextContent().length})});return b}};b=a;g["default"]=b}),98);
__d("MWV2ComposerMediaStaging.bs",["fbt","ix","CometFileSelector.re","CometImage.react","CometImageCover.react","CometPressable.react","MDSText.react","MWChatFileIcon.bs","MWV2ComposerFileButton.bs","MWV2ComposerMediaProgressBar.bs","MessagingAttachmentType.bs","TetraCircleButton.react","TetraIcon.react","bs_caml","bs_caml_option","bs_curry","fbicon","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={root:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",flexGrow:"kb5gq1qc",flexShrink:"pfnyh3mw",height:"m7zwrmfr",width:"tmrshh9y",marginEnd:"tvfksri0",position:"l9j0dhe7",backgroundColor:"n1jkxfxr",borderTopStartRadius:"fni8adji",borderTopEndRadius:"hgaippwi",borderBottomEndRadius:"fykbt5ly",borderBottomStartRadius:"ns4ygwem"}};function m(a){var c=a.supportedFileTypes;a=a.onAttachmentsAdded;a=b("MWV2ComposerFileButton.bs").useOnFilesSelected(a);a={children:function(a){return k.jsx(b("CometPressable.react"),{"aria-label":g._(/*FBT_CALL*/"Upload another photo\/video"/*FBT_CALL*/),onPress:function(c){return b("bs_curry")._1(a,void 0)},xstyle:function(a){return[l.root]},children:k.jsx(b("TetraIcon.react"),{icon:b("fbicon")._(h("481777"),24),testid:"composer_attachment_area_photo_uploader",color:"primary"})})},multiple:!0,onFilesSelected:a};c!==void 0&&(a.accept=b("bs_caml_option").valFromOption(c));return k.jsx(b("CometFileSelector.re").make,a)}c={styles:l,make:m};var n={button:{position:"pmk7jnqg",top:"nezaghv5",end:"e712q9ov"}};function o(a){var c=a.onPress;return k.jsx("div",{className:(j||(j=b("stylex")))(n.button),children:k.jsx(b("TetraCircleButton.react"),{icon:b("fbicon")._(h("478231"),12),label:g._(/*FBT_CALL*/"Remove attachment"/*FBT_CALL*/),onPress:function(a){return b("bs_curry")._1(c,void 0)},size:24,type:"overlay"})})}d={styles:n,make:o};var p={video:{objectFit:"bixrwtb6"},playIcon:{position:"pmk7jnqg",start:"kfkz5moi",top:"rk01pc8j",marginStart:"fnu23jab",marginTop:"gy6hb44f"},file:{display:"j83agx80",alignItems:"bp9cbjyn",userSelect:"abiwlrkh",paddingTop:"ecm0bbzt",paddingBottom:"e5nlhep0",paddingEnd:"dflh9lhu",paddingStart:"scb9dxdr"},fileContent:{flexGrow:"buofh1pr"}};function q(a){a=a.mediaStaging;var c=a.c;if(b("bs_caml").i64_eq(c,b("MessagingAttachmentType.bs").video)){var d=a.j;if(d!==void 0)return k.jsxs(k.Fragment,{children:[k.jsx("video",{src:d,width:"48",height:"48",className:(j||(j=b("stylex")))(p.video)}),k.jsx("div",{className:j(p.playIcon),children:k.jsx(b("CometImage.react"),{src:h("354763")})})]});else return null}if(!b("bs_caml").i64_eq(c,b("MessagingAttachmentType.bs").image))return k.jsxs("div",{className:(j||(j=b("stylex")))(p.file),children:[k.jsx(b("MWChatFileIcon.bs").make,{}),k.jsx("div",{className:j(p.fileContent),children:k.jsx(b("MDSText.react"),{type:"headline4",numberOfLines:2,children:a.e})})]});d=a.j;if(d!==void 0)return k.jsx(b("CometImageCover.react"),{alt:"",src:d});else return null}e={styles:p,make:q};var r={itemContainer:{flexGrow:"kb5gq1qc",flexShrink:"pfnyh3mw",height:"m7zwrmfr",width:"tmrshh9y",marginTop:"rs0gx3tq",marginEnd:"tvfksri0",marginBottom:"w0hvl6rk",marginStart:"hcukyx3x",position:"l9j0dhe7"},previewContainer:{position:"l9j0dhe7",overflowX:"ni8dbmo4",overflowY:"stjgntxs",height:"m7zwrmfr",width:"tmrshh9y",borderTopStartRadius:"fni8adji",borderTopEndRadius:"hgaippwi",borderBottomEndRadius:"fykbt5ly",borderBottomStartRadius:"ns4ygwem"},fileContainer:{width:"k5ud4834"},filePreviewContainer:{width:"k5ud4834",backgroundColor:"acsorfik"}};function s(a){var c=a.mediaStaging,d=a.onAttachmentRemoved;a=k.useCallback(function(a){return b("bs_curry")._1(d,c.a)},[]);var e=b("bs_caml").i64_neq(c.c,b("MessagingAttachmentType.bs").video)&&b("bs_caml").i64_neq(c.c,b("MessagingAttachmentType.bs").image);return k.jsxs("div",{className:(j||(j=b("stylex")))(r.itemContainer,e?r.fileContainer:!1),children:[k.jsxs("div",{className:j(r.previewContainer,e?r.filePreviewContainer:!1),children:[k.jsx(q,{mediaStaging:c}),k.jsx(b("MWV2ComposerMediaProgressBar.bs").make,{mediaStaging:c,height:4})]}),k.jsx(o,{onPress:a})]})}var t={styles:r,make:s},u={container:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"jifvfom9",flexWrap:"owycx6da",paddingTop:"pybr56ya",paddingEnd:"d1544ag0",paddingBottom:"f10w8fjw",paddingStart:"tw6a2znq",overflowX:"d76ob5m9",width:"k4urcfbm",boxSizing:"rq0escxv"}};function a(a){var c=a.mediaStaging,d=a.onAttachmentRemoved,e=a.onAttachmentsAdded;a=a.supportedFileTypes;if(c.length===0)return null;else return k.jsxs("div",{className:(j||(j=b("stylex")))(u.container),children:[c.map(function(a){return k.jsx(s,{mediaStaging:a,onAttachmentRemoved:d},a.a)}),k.jsx(m,{supportedFileTypes:a,onAttachmentsAdded:e})]})}a=a;f.UploadPlaceholder=c;f.CloseButton=d;f.Preview=e;f.StagingItem=t;f.styles=u;f.make=a}),null);
__d("MWV2ComposerMediaUploadUtil.bs",["MessagingAttachmentType.bs","URI","XComposerPhotoUploader","bs_caml","bs_caml_array","bs_caml_int64","bs_caml_obj","bs_caml_option","bs_curry","cometIsMimeTypeForMedia","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d,e,f,h){a=a!==void 0?a:function(a,b){};var i=d!==void 0?d:function(a,b){};d=e!==void 0?e:!1;e=new(b("XComposerPhotoUploader"))({concurrentLimit:3,onUploadFailure:function(a,c){b("bs_curry")._2(i,a,c);return!0},onUploadProgress:b("bs_curry").__2(a),onUploadStart:function(a){},onUploadSuccess:function(a,d){d=b("bs_caml_array").get(d.response.payload.metadata,0);var e=d.fbid,f=d.video_id,g=d.audio_id,h=d.gif_id;d=d.file_id;e=e!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(e)):f!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(f)):g!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(g)):h!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(h)):d!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(d)):void 0;e!==void 0?b("bs_curry")._2(c,a,e):b("unrecoverableViolation")("Unrecognized file upload success payload","messenger_comet")},retryLimit:1,uploadEndpoint:new(g||(g=b("URI")))("/ajax/mercury/upload.php")});a=d?{data:{voice_clip:!0}}:void 0;e.getAsyncFileUploadRequest(f,h,a).send()}function c(a){a=a.type;if(b("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a))return b("MessagingAttachmentType.bs").image;else if(a==="audio/wav")return b("MessagingAttachmentType.bs").audio;else if(a==="image/gif")return b("MessagingAttachmentType.bs").animatedImage;else if(b("cometIsMimeTypeForMedia").isMimeTypeForVideo(a))return b("MessagingAttachmentType.bs").video;else return b("MessagingAttachmentType.bs").file}function d(a){return{attachment_fbid:a.a,offline_attachment_id:a.a,attachment_type:a.c,attachment_index:b("bs_caml_int64").zero,filename:a.e,filesize:void 0,has_media:!0,has_xma:!1,playable_url:a.j,playable_url_mime_type:a.d,playable_duration_ms:void 0,preview_url:a.j,preview_url_mime_type:void 0,mini_preview:void 0,preview_width:[0,200],preview_height:[0,200],xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0}}function e(a,c,d){return{attachment_fbid:a,offline_attachment_id:a,attachment_type:b("MessagingAttachmentType.bs").audio,attachment_index:b("bs_caml_int64").zero,filename:void 0,filesize:void 0,has_media:!0,has_xma:!1,playable_url:URL.createObjectURL(c),playable_url_mime_type:c.type,playable_duration_ms:b("bs_caml_int64").of_float(d*1e3),preview_url:void 0,preview_url_mime_type:void 0,mini_preview:void 0,preview_width:void 0,preview_height:void 0,xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0}}function h(a,c){var d=[],e=[];a.forEach(function(a){b("bs_caml").i64_eq(a.attachment_type,b("MessagingAttachmentType.bs").image)&&!c?e.push(a):d.push([a])});e.length>0&&d.unshift(e);return d.map(function(a){return a.map(function(a,c){a=b("bs_caml_obj").caml_obj_dup(a);a.attachment_index=b("bs_caml_int64").of_int32(c);return a})})}f.startUpload=a;f.getAttachmentType=c;f.getAttachment=d;f.getAudioAttachment=e;f.partition=h}),null);
__d("MWV2ComposerReplyView.bs",["fbt","ix","CometErrorBoundary.re","CometTriggerAccessibilityAlertContext","LSContactGenderToGenderConst.bs","LsFalcoEventEntryPoint.bs","LsReplyRenderedFalcoEvent","MDSText.react","MDSTextPairing.react","MWChatReplyText.bs","MWLSActor.bs","MWV2ReplyContext.bs","MessagingAttachmentType.bs","ReQL.bs","ReQLSuspense.bs","ReQLTable","ReStore.bs","TetraIcon.react","bs_belt_Option","bs_caml","bs_caml_obj","bs_curry","bs_int64","fbicon","getFBTSafeGenderFromGenderConst","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={container:{borderTop:"l6v480f0",backgroundColor:"nred35xi",paddingEnd:"oj5qckz4",paddingStart:"lb8aey2d",paddingTop:"jktsbyx5",paddingBottom:"pby63qed",display:"j83agx80",justifyContent:"i1fnvgqd",alignItems:"ll8tlv6m"},message:{marginEnd:"o3lre8g0"}};function m(a){var c=a.message,d=b("ReStore.bs").useHook(void 0);a=b("MWLSActor.bs").useActor(void 0);a=b("bs_caml").i64_eq(c.h,a);var e=b("ReQLSuspense.bs").first(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"contacts").asc,{hd:c.h,tl:0})},[d,JSON.stringify(c.h)])),f=b("ReQLSuspense.bs").first(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"attachments").asc,{hd:c.a,tl:{hd:c.e,tl:0}})},[d,c.e,JSON.stringify(c.a)]));k.useEffect(function(){b("LsReplyRenderedFalcoEvent").log(function(){return{funnel:{entry_point:b("LsFalcoEventEntryPoint.bs").messageActions}}})},[]);f=c.m?g._(/*FBT_CALL*/"Removed message"/*FBT_CALL*/):c.g!==void 0&&b("bs_caml_obj").caml_notequal(c.g,"")?k.jsx(b("MWChatReplyText.bs").make,{text:b("bs_belt_Option").getWithDefault(c.g,g._(/*FBT_CALL*/"Message"/*FBT_CALL*/))}):f!==void 0?b("bs_caml").i64_eq(f.f,b("MessagingAttachmentType.bs").image)?g._(/*FBT_CALL*/"Image"/*FBT_CALL*/):b("bs_caml").i64_eq(f.f,b("MessagingAttachmentType.bs").sticker)?g._(/*FBT_CALL*/"Sticker"/*FBT_CALL*/):b("bs_caml").i64_eq(f.f,b("MessagingAttachmentType.bs").video)?g._(/*FBT_CALL*/"Video"/*FBT_CALL*/):b("bs_caml").i64_eq(f.f,b("MessagingAttachmentType.bs").animatedImage)?g._(/*FBT_CALL*/"GIF"/*FBT_CALL*/):g._(/*FBT_CALL*/"Attachment"/*FBT_CALL*/):g._(/*FBT_CALL*/"Message"/*FBT_CALL*/);if(a)a=g._(/*FBT_CALL*/"Replying to yourself"/*FBT_CALL*/);else if(e!==void 0){var h=e.p;a=g._(/*FBT_CALL*/{"*":"Replying to {name}"}/*FBT_CALL*/,[g._param("name",k.jsx(b("MDSText.react"),{type:"bodyLink4",children:h!==void 0?h:e.h}),[1,b("getFBTSafeGenderFromGenderConst")(b("LSContactGenderToGenderConst.bs").make(e.I))])])}else a=g._(/*FBT_CALL*/"Replying to {Placeholder for an unknown user}"/*FBT_CALL*/,[g._param("Placeholder for an unknown user","Facebook User")]);return k.jsx("div",{className:(j||(j=b("stylex")))(l.message),children:k.jsx(b("MDSTextPairing.react"),{body:k.jsx(k.Fragment,{children:k.jsx(b("MDSText.react"),{type:"body4",children:a})}),meta:f,level:3})})}d={make:m};function a(a){var c=a.message;a=k.useContext(b("MWV2ReplyContext.bs").context);var d=a.clearReply,e=k.useContext(b("CometTriggerAccessibilityAlertContext"));return k.jsxs("div",{className:(j||(j=b("stylex")))(l.container),children:[k.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return k.jsx(b("MDSText.react"),{type:"body4",children:g._(/*FBT_CALL*/"Replying to message"/*FBT_CALL*/)})},children:k.jsx(m,{message:c})}),k.jsx(b("TetraIcon.react"),{"aria-label":g._(/*FBT_CALL*/"Cancel reply"/*FBT_CALL*/),icon:b("fbicon")._(h("478231"),12),onPress:function(a){b("bs_curry")._2(d,c.a,!0);return b("bs_curry")._2(e,g._(/*FBT_CALL*/"Replying to message has been cancelled."/*FBT_CALL*/).toString(),{assertive:!1})},color:"primary"})]})}var n=k.memo(a);e={make:n};function c(a){var c=a.thread,d=a.messageId,e=a.messageTimestamp,f=b("ReStore.bs").useHook(void 0);a=b("ReQLSuspense.bs").first(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(f,"messages").asc,{hd:c.a,tl:{hd:e,tl:{hd:d,tl:0}}})},[f,b("bs_int64").to_string(c.a),d,JSON.stringify(e)]));if(a!==void 0)return k.jsx(n,{message:a});else return null}a=c;f.styles=l;f.Inner=d;f.Container=e;f.make=a}),null);
__d("MWLSDefaultThreadSource.bs",["LSThreadAttributionStore.bs","LSThreadAttributionTypeUtil.bs","MWLSThreadDisplayContext.bs","bs_int64","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){a=b("MWLSThreadDisplayContext.bs").useHook(void 0);var c=a!==void 0?a===1?"inboxInThread":a===0?"chatInThread":"unknown":"unknown";return h.useCallback(function(a){return b("LSThreadAttributionTypeUtil.bs").toLSThreadAttribution(b("LSThreadAttributionStore.bs").getSource(c,b("bs_int64").to_string(a)))},[c])}f.useHook=a}),null);
__d("mwpOutlineCreateEditor",["CometOutlineEmojiNode","MessengerOutlineActorNode","Outline","OutlineParagraphNode"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("Outline").createEditor({theme:{paragraph:"kvgmc6g5 oygrvhab"}});a.registerNodes([d("OutlineParagraphNode").ParagraphNode,d("MessengerOutlineActorNode").MessengerOutlineActorNode,d("CometOutlineEmojiNode").EmojiNode]);return a}g["default"]=a}),98);
__d("MWPComposerEditor.bs",["LS.bs","LSTransaction.bs","LSUpdateDraftMessage","MWChatFocusComposerContext.bs","MWChatUseLatch.bs","MWV2ChatComposerGetViewContent","MWV2ComposerHasContentContext.bs","MWV2IsTabFocusedContext.bs","MWV2ReplyContext.bs","Outline","OutlineParagraphNode","OutlineRootHelpers","ReStore.bs","bs_caml_obj","bs_caml_option","bs_curry","cr:11463","mwpOutlineCreateEditor","promiseDone","react","useCometOutlineComposition","useCometOutlineKeyBindings","useDebounced","useOutlineIsTextContentEmpty","useOutlinePlainText","usePrevious"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){h.useEffect(function(){b("bs_curry")._1(c,a.getEditorState())},[a,c]),h.useEffect(function(){return a.addListener("update",function(a){return b("bs_curry")._1(c,a.editorState)})},[c,a])}function j(a,c){c=b("bs_curry")._3(b("MWChatUseLatch.bs").useLatch,c,!0,5e3);var d=c[1],e=c[0],f=h.useRef("");h.useEffect(function(){var c=function(a){a=a.editorState.read(function(a){a=b("bs_curry")._1(a.getRoot,void 0);return a.getTextContent(void 0,void 0)});if(a!==f.current){f.current=a;if(a==="")return b("bs_curry")._1(d,void 0);else return b("bs_curry")._1(e,void 0)}};return a.addListener("update",c)},[e,d,a])}function k(a){var c=b("ReStore.bs").useHook(void 0);return h.useCallback(function(d){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("LSUpdateDraftMessage")(a.a,d,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite"),void 0,void 0)},[c,JSON.stringify(a.a)])}function l(a,c,d){h.useLayoutEffect(function(){return d(function(d){if(!c&&d.keyCode===13&&!d.ctrlKey&&!d.metaKey&&!d.shiftKey&&!d.altKey){d.preventDefault();d.stopImmediatePropagation();b("bs_curry")._1(a,void 0);return"handled"}else return"not-handled"},"EDITOR")},[a,c,d])}function m(a){var c=b("MWV2ReplyContext.bs").useContext(void 0),d=c.reply,e=b("usePrevious")(d);h.useEffect(function(){var c=e==null?d!==void 0:b("bs_caml_obj").caml_notequal(e,d)?!0:!1;c&&a.focus(function(a){})},[a,d,e==null?void 0:b("bs_caml_option").some(e)])}function n(a,b){return function(a,b){return a instanceof b}(a,b)}function o(a,c){h.useLayoutEffect(function(){a.update(function(a){b("Outline").log("MWV2ComposerEditor.prepopulate");var d=c.current;if(d===void 0)return;var e=b("bs_curry")._1(a.getRoot,void 0).getFirstChild();if(e!==null){if(!n(e,b("Outline").BlockNode))return;e.clear();var f=b("Outline").createTextNode(d);e.append(f);f.select(void 0,void 0);return}e=b("OutlineParagraphNode").createParagraphNode();f=b("Outline").createTextNode(d);e.append(f);b("bs_curry")._1(a.getRoot,void 0).append(e);f.select(void 0,void 0)},function(a){})},[a,c])}var p=b("cr:11463")==null?function(a){}:b("cr:11463").useHook;function a(a){var c=a.thread,d=a.isPreviewThread,e=a.mediaStaging,f=a.onSendMessage,g=a.onSendEmptyMessage,n=a.onTypingStateChanged;a=a.children;var q=c.H,r=h.useRef(null);q=h.useRef(q);b("bs_curry")._1(p,r);var s=h.useMemo(function(){return b("mwpOutlineCreateEditor")()},[]),t={contents:function(a){}},u=k(c),v=b("useDebounced")(u,2e3,void 0),w=h.useRef(void 0);c=b("MWV2ComposerHasContentContext.bs").useContext(void 0);var x=c.shouldClearDraftMessageRef,y=c.hasContentRef;h.useEffect(function(){return function(a){if(x!==void 0&&x.current)return b("bs_curry")._1(u,"");a=w.current;if(a!==void 0)return b("bs_curry")._1(u,a)}},[]);c=h.useCallback(function(a){a=a.read(function(a){return b("OutlineRootHelpers").textContent(a)});w.current=a;y!==void 0&&(y.current=a!=="");return v(a)},[s,u]);i(s,c);j(s,n);c=b("useCometOutlineKeyBindings")(s);n=b("useCometOutlineComposition")(s);var z=b("useOutlineIsTextContentEmpty")(s);e=e.length>0;var A=!z||e;z=h.useContext(b("MWChatFocusComposerContext.bs").context);var B=z.setFocusComposer;h.useEffect(function(){b("bs_curry")._1(B,function(a){return s.focus(function(a){})})},[s]);var C=b("MWV2IsTabFocusedContext.bs").useContext(void 0);h.useEffect(function(){C&&!d&&s.focus(function(a){})},[s,C,d]);m(s);o(s,q);var D=function(a,c,d,e,g,h,i,j,k,l){b("bs_curry").app(f,[a,c,d,e,g,h,i,j,k,void 0,void 0]);return s.focus(function(a){})};e=h.useCallback(function(a){if(A){a=b("MWV2ChatComposerGetViewContent").getRanges(s);var c=s.getEditorState();c=c.read(function(a){return b("OutlineRootHelpers").textContent(a)});D(c,a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}else b("bs_curry")._1(g,void 0);w.current="";return b("bs_curry")._1(t.contents,void 0)},[s,D,A]);l(e,n,c);t.contents=b("useOutlinePlainText")(s,!1);return b("bs_curry")._5(a,s,A,r,c,e)}c=a;f.$MWUseKeyCommandsForComposer$OR$null$requireCond=b("cr:11463");f.make=c}),null);
__d("MessagingBackend.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.messengerInfra=a;f.whatsappInfra=c}),null);
__d("MessagingLoggingUtilsAttachmentTypeInt.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24];f.text=a;f.none=c;f.fbVoiceMessage=d;f.like=e;f.sticker=b;f.videoMessage=g;f.gif=h;f.$$location=i;f.image=j;f.application=k;f.video=l;f.audio=m;f.messengerInvite=n;f.share=o;f.liveLocation=p;f.lightweightAction=q;f.fakeNewsLink=r;f.p2pPayment=s;f.montageDirect=t;f.sphericalPhoto=u;f.reaction=v;f.story=w;f.selfieSticker=x;f.soundBite=y;f.armadilloSysPacket=z}),null);
__d("SendEventType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.sendAttempt=a;f.sendAcknowledgement=c}),null);/*FB_PKG_DELIM*/
__d("OutlineSelectionHelpers",["cr:1967616"],(function(a,b,c,d,e,f){e.exports=b("cr:1967616")}),null);
__d("cometAddEmojiToComposerForOutline",["CometOutlineEmojiNode","FBEmojiResource","Outline","OutlineSelectionHelpers"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function a(a,b,e){b.focus(function(){b.update(function(b){d("Outline").log("cometAddEmojiToComposerForOutline");b=b.getSelection();if(b!==null){var f=h(a),g=a.map(function(a){return String.fromCodePoint(a)});g=c("FBEmojiResource").fromCodepoints(g);if(g==null)return;g=g.getImageURL(e);if(g==null)return;var i=f;f=d("CometOutlineEmojiNode").createEmojiNode(f,i,g,e);d("OutlineSelectionHelpers").insertNodes(b,[f])}})})}g["default"]=a}),98);
/**
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
  *
  * @noflow
  * @nolint
  * @preventMunge
  * @preserve-invariant-messages
  * @generated
  * @preserve-whitespace
  * @fullSyntaxTransform
  */__d("OutlineSelectionHelpers.prod",["Outline","OutlineHashtagNode"],(function $module_OutlineSelectionHelpers_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function v(a){throw Error("Minified Outline error #"+a+"; see codes.json for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}function w(a){return a.isImmutable()||a.isInert();}var x=new Map();
function y(a){a=a.getLatest();var b=a.constructor.clone(a);b.__flags=a.__flags;b.__parent=a.__parent;require("Outline").isElementNode(a)?(b.__children=Array.from(a.__children),b.__format=a.__format,b.__indent=a.__indent):require("Outline").isTextNode(a)?(b.__format=a.__format,b.__style=a.__style):require("Outline").isDecoratorNode(a)&&(b.__ref=a.__ref);return b;}
function z(a,b,c,d,f){for(var e=b;null!==a;){for(b=a.getParent();null!==b&&b.excludeFromCopy();){b=b.getParent();}if(null===b)break;if(!require("Outline").isElementNode(a)||!a.excludeFromCopy()){var g=a.getKey();var h=f.get(g);var m=void 0===h;m&&(h=y(a),f.set(g,h));!require("Outline").isTextNode(h)||h.isSegmented()||h.isImmutable()?require("Outline").isElementNode(h)&&(h.__children=h.__children.slice(c?e:0,c?void 0:e+1)):h.__text=h.__text.slice(c?e:0,c?void 0:e);if(require("Outline").isRootNode(b)){m&&d.push(g);break;}}e=f.get(b.getKey());e=require("Outline").isElementNode(e)?e.__children.indexOf(a.getKey()):
a.getIndexWithinParent();a=b;}}function A(a){return x.get(a)||null;}function B(a,b){var c=A(a.getStyle());b=c?babelHelpers["extends"]({},c,b):b;c="";for(d in b){d&&(c+=d+": "+b[d]+";");}var d=c;a.setStyle(d);x.set(d,b);}function C(a,b){var c=a.anchor;a=a.focus;var d=c.getNode(),f=a.getNode();if(d===f&&"text"===c.type&&"text"===a.type){var e=c.offset,g=a.offset;var h=e<g;f=h?e:g;g=h?g:e;e=g-1;f!==e&&(d=d.getTextContent().slice(f,g),/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(d)||(b?a.offset=e:c.offset=e));}}
function D(a){var b=a.anchor;if("text"===b.type){b=b.getNode();var c=b.getTextContent();a=a.anchor.offset;if(0===a&&b.isSimpleText()){if(a=b.getPreviousSibling(),require("Outline").isTextNode(a)&&require("OutlineHashtagNode").isHashtagNode(a)){a.select();var d=a.getTextContent();a.setTextContent(d+c);b.remove();}}else require("OutlineHashtagNode").isHashtagNode(b)&&a===b.getTextContentSize()&&(a=b.getNextSibling(),require("Outline").isTextNode(a)&&a.isSimpleText()&&(d=a.getTextContent(),b.setTextContent(c+d),a.remove()));}}
function E(a,b){if(a.isCollapsed()){var c=a.anchor,d=a.focus,f=c.getNode();if(require("Outline").isElementNode(f)&&!f.canSelectionRemove()||!b&&("element"===c.type&&c.offset===f.getChildrenSize()||"text"===c.type&&c.offset===f.getTextContentSize())&&(f=f.getNextSibling()||f.getParentOrThrow().getNextSibling(),require("Outline").isElementNode(f)&&!f.canExtractContents()))return;F(a,b,"character",!1);if(!a.isCollapsed()){var e="text"===d.type?d.getNode():null;f="text"===c.type?c.getNode():null;if(null!==e&&e.isSegmented()){if(c=d.offset,
d=e.getTextContentSize(),e.is(f)||b&&c!==d||!b&&0!==c){G(e,b);return;}}else if(null!==f&&f.isSegmented()&&(c=c.offset,d=f.getTextContentSize(),f.is(e)||b&&0!==c||!b&&c!==d)){G(f,b);return;}C(a,b);}else if(b&&0===c.offset&&("element"===c.type?c.getNode():c.getNode().getParentOrThrow()).collapseAtStart(a))return;}H(a);D(a);}function G(a,b){var c=a.getTextContent().split(/\s/g);b?c.pop():c.shift();c=c.join(" ");""===c?a.remove():(a=a.setTextContent(c),b?a.select():a.select(0,0));}
function F(a,b,c,d){var f=a.focus;var e=a.anchor;var g=f.offset;if("element"===f.type)g=f.getNode().getChildAtIndex(b?g-1:g);else{var h=f.getNode();g=b&&0===g||!b&&g===h.getTextContentSize()?b?h.getPreviousSibling():h.getNextSibling():null;}if(require("Outline").isDecoratorNode(g)&&(h=b?g.getPreviousSibling():g.getNextSibling(),!require("Outline").isTextNode(h))){a=g.getParentOrThrow().getKey();c=g.getIndexWithinParent();b||c++;f.set(a,c,"element");d&&e.set(a,c,"element");return;}f=window.getSelection();f.modify(d?"move":"extend",
b?"backward":"forward",c);0<f.rangeCount&&(b=f.getRangeAt(0),a.applyDOMRange(b),d||f.anchorNode===b.startContainer&&f.anchorOffset===b.startOffset||a.swapPoints());}function H(a){I(a,"");}function J(a,b){var c=require("Outline").createLineBreakNode();b?K(a,[c],!0):K(a,[c])&&c.selectNext(0,0);}
function K(a,b,c){var _d;a.isCollapsed()||H(a);var d=a.anchor,f=d.offset,e=d.getNode();a=e;"element"===d.type&&(a=d.getNode(),d=a.getChildAtIndex(f-1),a=null===d?a:d);d=[];var g=e.getNextSiblings(),h=e.getTopLevelElementOrThrow();if(require("Outline").isTextNode(e))if(a=e.getTextContent().length,0===f&&0!==a)a=e.getPreviousSibling(),a=null!==a?a:e.getParentOrThrow(),d.push(e);else if(f===a)a=e;else{if(w(e))return!1;var _e$splitText=e.splitText(f);a=_e$splitText[0];e=_e$splitText[1];d.push(e);}e=a;(_d=d).push.apply(_d,g);f=b[0];var m=!1;for(g=0;g<b.length;g++){var n=b[g];if(require("Outline").isElementNode(n)){if(n.is(f)){if(require("Outline").isElementNode(a)&&
a.isEmpty()&&a.canReplaceWith(n)){a.replace(n);a=n;m=!0;continue;}var p=n.getFirstDescendant();if(require("Outline").isLeafNode(p)){p=p.getParentOrThrow();m=p.getChildren();var k=m.length;if(require("Outline").isElementNode(a))for(var q=0;q<k;q++){a.append(m[q]);}else{for(--k;0<=k;k--){a.insertAfter(m[k]);}a=a.getParentOrThrow();}p.remove();m=!0;if(p.is(n))continue;}}require("Outline").isTextNode(a)&&(a=h);}else m&&require("Outline").isRootNode(a.getParent())&&v(52);m=!1;if(require("Outline").isElementNode(a)){if(require("Outline").isElementNode(n)){if(n.canBeEmpty()||!n.isEmpty())a=a.insertAfter(n);}else p=
a.getFirstChild(),null!==p?p.insertBefore(n):a.append(n),a=n;}else require("Outline").isElementNode(n)?(a=n.getParentOrThrow(),g--):a=a.insertAfter(n);}c&&(require("Outline").isTextNode(e)?e.select():(b=a.getPreviousSibling(),require("Outline").isTextNode(b)?b.select():(b=a.getIndexWithinParent(),a.getParentOrThrow().select(b,b))));if(require("Outline").isElementNode(a)){if(b=a.getLastDescendant(),c||(null===b?a.select():require("Outline").isTextNode(b)?b.select():b.selectNext()),0!==d.length)for(c=d.length-1;0<=c;c--){b=d[c],h=b.getParentOrThrow(),require("Outline").isElementNode(a)&&!require("Outline").isElementNode(b)?(
a.append(b),a=b):require("Outline").isElementNode(b)&&!b.canInsertAfter(a)?(e=h.constructor.clone(h),require("Outline").isElementNode(e)||v(53),e.append(b),a.insertAfter(e)):a.insertAfter(b),h.isEmpty()&&!h.canBeEmpty()&&h.remove();}}else c||(require("Outline").isTextNode(a)?a.select():(c=a.getParentOrThrow(),a=a.getIndexWithinParent()+1,c.select(a,a)));return!0;}function L(a){var b=a.getNode(),c=b.getChildAtIndex(a.offset),d=require("Outline").createTextNode();null===c?b.append(d):c.insertBefore(d);a.set(d.getKey(),0,"text");}
function I(a,b){var c=a.anchor,d=a.focus,f=a.isCollapsed()||c.isBefore(d);f&&"element"===c.type?L(c):f||"element"!==d.type||L(d);var e=a.getNodes(),g=e.length,h=a.format,m=f?d:c;c=(f?c:d).offset;var p=m.offset;d=e[0];require("Outline").isTextNode(d)||v(7);f=d.getTextContent().length;var k=d.getParentOrThrow();if(!a.isCollapsed()||c!==f||!d.isSegmented()&&!d.isImmutable()&&d.canInsertTextAfter()&&k.canInsertTextAfter()){if(!a.isCollapsed()||0!==c||!d.isSegmented()&&!d.isImmutable()&&d.canInsertTextBefore()&&k.canInsertTextBefore())d.isSegmented()&&
c!==f&&(k=require("Outline").createTextNode(d.getTextContent()),d.replace(k),d=k);else{n=d.getPreviousSibling();if(!require("Outline").isTextNode(n)||w(n)||n.isSegmented())n=require("Outline").createTextNode(),k.canInsertTextBefore()?d.insertBefore(n):k.insertBefore(n);n.select();d=n;if(""!==b){I(a,b);return;}}}else{var n=d.getNextSibling();if(!require("Outline").isTextNode(n)||w(n)||n.isSegmented())n=require("Outline").createTextNode(),k.canInsertTextAfter()?d.insertAfter(n):k.insertAfter(n);n.select(0,0);d=n;if(""!==b){I(a,b);return;}}if(1===g){if(w(d))d.remove();else{e=d.getFormat();
if(c===p&&e!==h)if(""===d.getTextContent())d.setFormat(h);else{var _d$splitText;e=require("Outline").createTextNode(b);e.setFormat(h);e.select();0===c?d.insertBefore(e):((_d$splitText=d.splitText(c),g=_d$splitText[0],_d$splitText),g.insertAfter(e));return;}d=d.spliceText(c,p-c,b,!0);""===d.getTextContent()?d.remove():d.isComposing()&&"text"===a.anchor.type&&(a.anchor.offset-=b.length);}}else{k=e[g-1];h=new Set([].concat(d.getParentKeys(),k.getParentKeys()));var q=require("Outline").isElementNode(d)?d:d.getParentOrThrow();n=require("Outline").isElementNode(k)?k:k.getParentOrThrow();"text"===m.type&&(0!==p||""===
k.getTextContent())||"element"===m.type&&k.getIndexWithinParent()<p?require("Outline").isTextNode(k)&&!w(k)&&p!==k.getTextContentSize()?(k.isSegmented()&&(m=require("Outline").createTextNode(k.getTextContent()),k.replace(m),k=m),k=k.spliceText(0,p,""),h.add(k.getKey())):k.remove():h.add(k.getKey());m=n.getChildren();p=new Set(e);var r=q.is(n);if(n.canBeEmpty()){for(q=m.length-1;0<=q;q--){var t=m[q];if(t.is(d))break;t.isAttached()&&(!p.has(t)||t.is(k)?r||d.insertAfter(t):t.remove());}if(!r)for(m=n,p=null;null!==m;){k=m.getChildren();
n=k.length;if(0===n||k[n-1].is(p))h["delete"](m.getKey()),p=m;m=m.getParent();}}else q.append(n);w(d)?c===f?d.select():d.remove():(d=d.spliceText(c,f-c,b,!0),""===d.getTextContent()?d.remove():d.isComposing()&&"text"===a.anchor.type&&(a.anchor.offset-=b.length));for(a=1;a<g;a++){b=e[a],c=b.getKey(),h.has(c)||require("Outline").isElementNode(b)&&!b.canSelectionRemove()||b.remove();}}}function M(a){for(;null!==a&&!require("Outline").isRootNode(a);){var b=a.getLatest(),c=a.getParent();0===b.__children.length&&a.remove();a=c;}}
exports.cloneContents=function(a){var b=a.anchor,c=a.focus,d=b.getCharacterOffset();var f=c.getCharacterOffset();var e=b.getNode(),g=c.getNode(),h=e.getParentOrThrow();if(e===g&&require("Outline").isTextNode(e)&&(h.canBeEmpty()||1<h.getChildrenSize()))return a=y(e),e=f>d,a.__text=a.__text.slice(e?d:f,e?f:d),d=a.getKey(),{range:[d],nodeMap:[[d,a]]};a=a.getNodes();if(0===a.length)return{range:[],nodeMap:[]};e=a.length;g=a[0];h=g.getParent();if(null!==h&&!h.canBeEmpty()){var m=h.__children;if(m.length===e){var p=!0;
for(var k=0;k<m.length;k++){if(m[k]!==a[k].__key){p=!1;break;}}p&&(e++,a.push(h));}}h=a[e-1];b=b.isBefore(c);c=new Map();m=[];z(g,b?d:f,!0,m,c);for(g=0;g<e;g++){if(p=a[g],k=p.getKey(),!(c.has(k)||require("Outline").isElementNode(p)&&p.excludeFromCopy())){var n=y(p);require("Outline").isRootNode(p.getParent())&&m.push(p.getKey());c.set(k,n);}}z(h,b?f:d,!1,m,c);return{range:m,nodeMap:Array.from(c.entries())};};exports.deleteBackward=function(a){E(a,!0);};exports.deleteForward=function(a){E(a,!1);};
exports.deleteLineBackward=function(a){a.isCollapsed()&&F(a,!0,"lineboundary",!1);H(a);};exports.deleteLineForward=function(a){a.isCollapsed()&&F(a,!1,"lineboundary",!1);H(a);};exports.deleteWordBackward=function(a){a.isCollapsed()&&F(a,!0,"word",!1);H(a);};exports.deleteWordForward=function(a){a.isCollapsed()&&F(a,!1,"word",!1);H(a);};
exports.extractSelection=function(a){var _g$splitText,_a$splitText;var b=a.getNodes(),c=b.length,d=c-1,f=a.anchor;var e=a.focus;var g=b[0];a=b[d];var h=f.getCharacterOffset();var m=e.getCharacterOffset();if(0===c)return[];if(1===c)return require("Outline").isTextNode(g)?(b=h>m?m:h,d=g.splitText(b,h>m?h:m),[0===b?d[0]:d[1]]):[g];c=f.isBefore(e);require("Outline").isTextNode(g)&&(f=c?h:m,f===g.getTextContentSize()?b.shift():0!==f&&((_g$splitText=g.splitText(f),g=_g$splitText[1],_g$splitText),b[0]=g));require("Outline").isTextNode(a)&&(g=a.getTextContent().length,h=c?m:h,0===h?b.pop():h!==g&&((_a$splitText=a.splitText(h),a=_a$splitText[0],_a$splitText),b[d]=
a));return b;};
exports.formatText=function(a,b){var c=a.getNodes(),d=c.length-1;var f=c[0],e=c[d];if(a.isCollapsed())a.toggleFormatType(b);else{var g=a.anchor,h=a.focus,m=f.getTextContent().length,p=h.offset;a=0;for(var k=0;k<c.length;k++){var n=c[k];if(require("Outline").isTextNode(n)){a=n.getFormatFlags(b,null);break;}}var q=g.offset;n=(k=g.isBefore(h))?q:p;k=k?p:q;if(n===f.getTextContentSize()){var r=f.getNextSibling();require("Outline").isTextNode(r)&&(n=q=0,f=r,a=f.getFormatFlags(b,null));}if(f.is(e))require("Outline").isTextNode(f)&&("element"===g.type&&
"element"===h.type?(f.setFormat(a),f.select(n,k)):(n=q>p?p:q,k=q>p?q:p,n!==k&&(0===n&&k===m?(f.setFormat(a),f.select(n,k)):(b=f.splitText(n,k),b=0===n?b[0]:b[1],b.setFormat(a),b.select(0,k-n)))));else for(require("Outline").isTextNode(f)&&(0!==n&&(_f$splitText=f.splitText(n),f=_f$splitText[1],_f$splitText),f.setFormat(a)),g=a,require("Outline").isTextNode(e)&&(g=e.getFormatFlags(b,a),a=e.getTextContent().length,0!==k&&(k!==a&&(_e$splitText2=e.splitText(k),e=_e$splitText2[0],_e$splitText2),e.setFormat(g))),a=1;a<d;a++){var _f$splitText,_e$splitText2;k=c[a],h=k.getKey(),require("Outline").isTextNode(k)&&h!==f.getKey()&&h!==e.getKey()&&!k.isImmutable()&&(h=k.getFormatFlags(b,
g),k.setFormat(h));}}};exports.getSelectionStyleValueForProperty=function(a,b,c){if(c===void 0){c="";}var d=null;var f=a.getNodes();var e=a.anchor,g=a.focus,h=a.isBackward();a=h?g.offset:e.offset;e=h?g.getNode():e.getNode();for(g=0;g<f.length;g++){var m=f[g];if((0===g||0!==a||!m.is(e))&&require("Outline").isTextNode(m)){h=b;var p=c;m=m.getStyle();m=A(m);h=null!==m?m[h]||p:p;if(null===d)d=h;else if(d!==h){d="";break;}}}return null===d?c:d;};exports.getStyleObjectFromCSS=A;exports.insertLineBreak=J;exports.insertNodes=K;
exports.insertParagraph=function(a){a.isCollapsed()||H(a);var b=a.anchor,c=b.offset;if("text"===b.type){var _d$splitText2;var d=b.getNode(),f=d.getTextContent().length;b=d.getNextSiblings().reverse();var e=d.getParentOrThrow();0===c?b.push(d):c!==f&&((_d$splitText2=d.splitText(c),c=_d$splitText2[1],_d$splitText2),b.push(c));}else e=b.getNode(),b=e.getChildren().slice(c).reverse();c=e.insertNewAfter(a);if(null===c)J(a);else if(require("Outline").isElementNode(c)){a=b.length;e=null;if(0!==a)for(d=0;d<a;d++){f=b[d],null===e?c.append(f):e.insertBefore(f),e=f;}c.canBeEmpty()||0!==c.getChildrenSize()?
c.selectStart():(c.selectPrevious(),c.remove());}};exports.insertRichText=function(a,b){var c=b.split(/\r?\n/);if(1===c.length)I(a,b);else{b=[];var d=c.length;for(var f=0;f<d;f++){var e=c[f];""!==e&&b.push(require("Outline").createTextNode(e));f!==d-1&&b.push(require("Outline").createLineBreakNode());}K(a,b);}};exports.insertText=I;exports.isAtNodeEnd=function(a){return"text"===a.type?a.offset===a.getNode().getTextContentSize():a.offset===a.getNode().getChildrenSize();};
exports.moveCharacter=function(a,b,c){var d="rtl"===a.anchor.getNode().getTopLevelElementOrThrow().getDirection();F(a,c?!d:d,"character",!b);};
exports.patchStyleText=function(a,b){var c=a.getNodes();var d=c.length-1;var f=c[0],e=c[d];if(!a.isCollapsed()){var g=a.anchor,h=a.focus;a=f.getTextContent().length;var m=h.offset,p=g.offset;g=(h=g.isBefore(h))?p:m;h=h?m:p;if(g===f.getTextContentSize()){var k=f.getNextSibling();require("Outline").isTextNode(k)&&(g=p=0,f=k);}if(f.is(e))require("Outline").isTextNode(f)&&(g=p>m?m:p,h=p>m?p:m,g!==h&&(0===g&&h===a?(B(f,b),f.select(g,h)):(c=f.splitText(g,h),c=0===g?c[0]:c[1],B(c,b),c.select(0,h-g))));else for(require("Outline").isTextNode(f)&&(0!==g&&(_f$splitText2=
f.splitText(g),f=_f$splitText2[1],_f$splitText2),B(f,b)),require("Outline").isTextNode(e)&&(a=e.getTextContent().length,h!==a&&(_e$splitText3=e.splitText(h),e=_e$splitText3[0],_e$splitText3),0!==h&&B(e,b)),a=1;a<d;a++){var _f$splitText2,_e$splitText3;m=c[a],p=m.getKey(),require("Outline").isTextNode(m)&&p!==f.getKey()&&p!==e.getKey()&&!m.isImmutable()&&B(m,b);}}};exports.removeText=H;
exports.selectAll=function(a){var b=a.anchor;a=a.focus;var c=b.getNode().getTopLevelElementOrThrow().getParentOrThrow();var d=c.getFirstDescendant();c=c.getLastDescendant();var f="element",e="element",g=0;require("Outline").isTextNode(d)?f="text":require("Outline").isElementNode(d)||null===d||(d=d.getParentOrThrow());require("Outline").isTextNode(c)?(e="text",g=c.getTextContentSize()):require("Outline").isElementNode(c)||null===c||(c=c.getParentOrThrow(),g=c.getChildrenSize());d&&c&&(b.set(d.getKey(),0,f),a.set(c.getKey(),g,e));};
exports.updateCaretSelectionForAdjacentHashtags=D;exports.updateCaretSelectionForRange=F;exports.updateCaretSelectionForUnicodeCharacter=C;
exports.wrapLeafNodesInElements=function(a,b,c){var d=a.getNodes(),f=d.length;if(0===f){a=a.anchor;a="text"===a.type?a.getNode().getParentOrThrow():a.getNode();var e=a.getChildren();var r=b();e.forEach(function(t){return r.append(t);});c&&(r=c.append(r));a.replace(r);}else{var g=d[0],h=new Map();e=[];for(g=require("Outline").isElementNode(g)?g:g.getParentOrThrow();null!==g;){var m=g.getPreviousSibling();if(null!==m){g=m;break;}g=g.getParentOrThrow();if(require("Outline").isRootNode(g))break;}m=new Set();for(var p=0;p<f;p++){var k=d[p];require("Outline").isElementNode(k)&&
0===k.getChildrenSize()&&m.add(k.getKey());}var n=new Set();for(p=0;p<f;p++){var q=d[p];k=q.getParent();if(null!==k&&require("Outline").isLeafNode(q)&&!n.has(q.getKey())){if(q=k.getKey(),void 0===h.get(q)){(function(){var r=b();e.push(r);h.set(q,r);k.getChildren().forEach(function(t){r.append(t);n.add(t.getKey());});M(k);})();}}else m.has(q.getKey())&&(e.push(b()),q.remove());}if(c)for(b=0;b<e.length;b++){c.append(e[b]);}if(require("Outline").isRootNode(g)){if(b=g.getFirstChild(),require("Outline").isElementNode(b)&&(g=b),null===b){if(c)g.append(c);else for(c=0;c<e.length;c++){g.append(e[c]);}}else
if(c)b.insertBefore(c);else for(c=0;c<e.length;c++){b.insertBefore(e[c]);}}else if(c)g.insertAfter(c);else for(c=e.length-1;0<=c;c--){g.insertAfter(e[c]);}a.dirty=!0;}};}),null);/*FB_PKG_DELIM*/
__d("MWConsole",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){}g.log=a}),98);
__d("MWV2ComposerVoiceRecorder.bs",["fbt","CometComponentWithKeyCommands.react","CometKeys","CometPressable.react","MWChatAudioLog.bs","MWPThreadTheme.bs","bs_caml_option","bs_curry","cancelAnimationFrame","formatDurationSeconds","react","requestAnimationFrameAcrossTransitions","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react");function k(a){var b=a.currentTime;a=a.duration;return j.jsx("div",{style:{position:"absolute"},role:"slider",tabIndex:0,"aria-label":g._(/*FBT_CALL*/"Audio scrubber"/*FBT_CALL*/),"aria-valuenow":b,"aria-valuemin":0,"aria-valuemax":a})}c={make:k};function l(a){var c=a.audioEl;a=a.children;var d=j.useCallback(function(a){if(a>30)return 5;else if(a>10)return 3;else if(a>5)return 2;else if(a>2)return 1;else return.5},[]),e=j.useCallback(function(a){a=c.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a);var e=a.duration;a.currentTime=a.currentTime-b("bs_curry")._1(d,e)},[d]),f=j.useCallback(function(a){a=c.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a);var e=a.duration;a.currentTime=a.currentTime+b("bs_curry")._1(d,e)},[d]),h=j.useCallback(function(a){a=c.current;if(a!==void 0){b("bs_caml_option").valFromOption(a).currentTime=0;return}},[]),i=j.useCallback(function(a){a=c.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a);var d=a.duration;a.currentTime=d},[]),k=j.useMemo(function(){var a;return[{command:{key:(a=b("CometKeys")).UP},description:g._(/*FBT_CALL*/"Increases slider value one step."/*FBT_CALL*/),handler:f},{command:{key:a.DOWN},description:g._(/*FBT_CALL*/"Decreases slider value one step."/*FBT_CALL*/),handler:e},{command:{key:a.LEFT},description:g._(/*FBT_CALL*/"Decreases slider value one step."/*FBT_CALL*/),handler:e},{command:{key:a.RIGHT},description:g._(/*FBT_CALL*/"Increases slider value one step."/*FBT_CALL*/),handler:f},{command:{key:a.HOME},description:g._(/*FBT_CALL*/"Sets slider to its minimum value."/*FBT_CALL*/),handler:h},{command:{key:a.END},description:g._(/*FBT_CALL*/"Sets slider to its maximum value."/*FBT_CALL*/),handler:i}]},[e,f,h,i]);return j.jsx(b("CometComponentWithKeyCommands.react"),{commandConfigs:k,children:a})}d={make:l};var m={timer:{marginEnd:"fv0vnmcu",marginStart:"ggphbty4",height:"oeo4gz9l",width:"chsygg5i",backgroundColor:"q2y6ezfg",borderTopStartRadius:"pdihbav5",borderTopEndRadius:"fo8ltl2p",borderBottomEndRadius:"b8f6b1oh",borderBottomStartRadius:"q0b78ich",display:"j83agx80",justifyContent:"taijpn5t",alignItems:"bp9cbjyn",fontSize:"e9vueds3",fontWeight:"lrazzd5p",cursor:"nhd2j8a9",userSelect:"abiwlrkh",position:"l9j0dhe7"}},n=j.memo(function(a){var c=a.time;a=a.color;a=a!==void 0?a:"black";c=b("formatDurationSeconds")(c);a={color:a};return j.jsx("div",{"data-testid":"mw_recorder_timestamp",className:(i||(i=b("stylex")))(m.timer),style:a,children:c})});e={styles:m,make:n};var o={pressable:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",width:"b73ngqbp",height:"rgmg9uty",backgroundColor:"q2y6ezfg",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv"}};function p(a){var c=a.onPress,d=a.onHoverMove,e=a.label;a=a.icon;e={"aria-label":e,disabled:c===void 0,overlayRadius:"50%",xstyle:function(a){return[o.pressable]},children:a};d!==void 0&&(e.onHoverMove=b("bs_caml_option").valFromOption(d));c!==void 0&&(e.onPress=b("bs_caml_option").valFromOption(c));return j.jsx(b("CometPressable.react"),e)}var q={styles:o,make:p},r={highlight:{height:"datstx6m",width:"k4urcfbm",start:"j9ispegn",top:"kr520xx4",position:"pmk7jnqg",transform:"hp24h0cv"},outgoing:{opacity:"lupvgy83",backgroundColor:"q2y6ezfg"},incoming:{opacity:"h34q056n",backgroundColor:"rn3djb20"}},s=j.forwardRef(function(a,c){var d=a.style;a=a.outgoing;d=d!==void 0?b("bs_caml_option").valFromOption(d):{};var e=j.useRef(void 0);j.useImperativeHandle(c,function(){return{updateHighlight:function(a){var b=e.current;if(!(b==null)){b.style.transform="translateX("+(a-100).toFixed(1)+"%)";return}}}},[e]);return j.jsx("div",{ref:e,className:(i||(i=b("stylex")))(r.highlight,a?r.outgoing:r.incoming),style:d})}),t={styles:r,make:s};function u(a){var c=a.duration,d=a.audioEl,e=a.currentTime,f=a.isProgressing,g=a.isCompleted;a=a.outgoing;a=a!==void 0?a:!0;var h=j.useRef(void 0);j.useEffect(function(){var a=function(a){var b=h.current;if(!(b==null))return b.updateHighlight(a)};if(g){a(0);return}if(f){var e={contents:void 0},i={contents:void 0},j=function f(g){var h=d.current;if(h!==void 0){h=b("bs_caml_option").valFromOption(h);h=h.currentTime/h.duration}else{var j=e.contents;j=j!==void 0?g-j:(e.contents=g,0);h=j/(c*1e3)}g=Math.min(h*100,100);a(g);if(g<100){i.contents=b("bs_caml_option").some(b("requestAnimationFrameAcrossTransitions")(f));return}};i.contents=b("bs_caml_option").some(b("requestAnimationFrameAcrossTransitions")(j));return function(a){a=i.contents;if(a!==void 0){b("cancelAnimationFrame")(b("bs_caml_option").valFromOption(a));return}}}j=d.current;if(j!==void 0){j=b("bs_caml_option").valFromOption(j);j=j.currentTime/j.duration;a(j*100)}},[c,f,g,h,d,e]);return j.jsx(s,{style:{transform:"translateX(-100%)"},outgoing:a,ref:h})}var v={make:u};function w(a,b,c){return Math.min(Math.max(b,a),c)}var x={container:{flexGrow:"buofh1pr",display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"i1fnvgqd",height:"tv7at329",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"l9j0dhe7"}};function y(a){var c=a.scrubberRef,d=a.hasScrubber,e=a.audioEl,f=a.color,g=a.testid,h=a.style;a=a.children;h=h!==void 0?b("bs_caml_option").valFromOption(h):{};var k=j.useRef(void 0),l=function(a,b){b=b.getBoundingClientRect();a=a.clientX-b.left;a=a/b.width;return w(a,0,1)},m=function(a){var c=e.current,d=k.current;if(c===void 0)return;if(d==null)return;c=b("bs_caml_option").valFromOption(c);c.currentTime=l(a,d)*c.duration*100/100},n=function(a){var b=k.current,d=c.current;if(!(b==null)&&!(d==null))return d.updateHighlight(l(a,b)*100)},o=function(a){a=c.current;if(!(a==null))return a.updateHighlight(0)};return j.jsx("div",{ref:k,"data-testid":g,className:(i||(i=b("stylex")))(x.container),style:Object.assign({},{backgroundColor:f},h),onMouseMove:d?n:void 0,onMouseLeave:d?o:void 0,onClick:d?m:void 0,children:a})}var z={clamp:w,styles:x,make:y};function A(a){a=a.color;return j.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 36 36",children:j.jsx("path",{d:"M10 25.5v-15a1.5 1.5 0 012.17-1.34l15 7.5a1.5 1.5 0 010 2.68l-15 7.5A1.5 1.5 0 0110 25.5z",fill:a})})}var B={make:A};function C(a){a=a.color;return j.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 36 36",children:j.jsx("rect",{x:"9",y:"9",width:"18",height:"18",rx:"2",fill:a})})}var D={make:C};function E(a){a=a.color;return j.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 36 36",children:j.jsx("path",{d:"M11 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4zM21 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4z",fill:a})})}var F={make:E},G=g._(/*FBT_CALL*/"Play"/*FBT_CALL*/),H=g._(/*FBT_CALL*/"Stop recording"/*FBT_CALL*/),I=g._(/*FBT_CALL*/"Pause"/*FBT_CALL*/),J={playbackButtonContainer:{marginEnd:"fv0vnmcu",marginStart:"ggphbty4"}};function a(a){var c=a.voiceRecorder;a=b("MWPThreadTheme.bs").useBottom(void 0);var d=c.audioEl,e=c.state,f;if(typeof e==="number")f=!1;else switch(e.TAG|0){case 0:f=!1;break;case 1:case 2:f=!0;break}var g=j.useRef(void 0),h=function(a){var b=g.current;if(!(b==null)){a.stopPropagation();return b.updateHighlight(0)}},m=function(a){b("bs_curry")._1(c.toggle,e);if(typeof e==="number")return;switch(e.TAG|0){case 0:return b("MWChatAudioLog.bs").logClickStopRecording(0);case 1:a=e._1;var d=e._0;if(a===0)return b("MWChatAudioLog.bs").logPlaybackStart(d);else return b("MWChatAudioLog.bs").logPlaybackResume(d,a);case 2:return b("MWChatAudioLog.bs").logPlaybackPause(e._0,e._1)}},o;if(typeof e==="number")o=0;else switch(e.TAG|0){case 0:o=60;break;case 1:case 2:o=e._0;break}var q;if(typeof e==="number")q=void 0;else switch(e.TAG|0){case 0:q=void 0;break;case 1:case 2:q=e._1;break}var r;if(typeof e==="number")r=!1;else switch(e.TAG|0){case 1:r=!1;break;case 0:case 2:r=!0;break}var t;t=typeof e==="number"||e.TAG!==1?!1:e._1===0;t={duration:o,audioEl:d,isProgressing:r,isCompleted:t,outgoing:!0};q!==void 0&&(t.currentTime=b("bs_caml_option").valFromOption(q));var v,w=0;if(typeof e==="number")v=null;else switch(e.TAG|0){case 0:v=null;break;case 1:case 2:w=1;break}w===1&&(v=j.jsx(k,{currentTime:e._1,duration:e._0}));var x;if(typeof e==="number")x=G;else switch(e.TAG|0){case 0:x=H;break;case 1:x=G;break;case 2:x=I;break}var z;if(typeof e==="number")z=j.jsx(A,{color:a});else switch(e.TAG|0){case 0:z=j.jsx(C,{color:a});break;case 1:z=j.jsx(A,{color:a});break;case 2:z=j.jsx(E,{color:a});break}var B;w=0;if(typeof e==="number")B=0;else switch(e.TAG|0){case 0:B=e._1;break;case 1:case 2:w=1;break}w===1&&(B=Math.max(e._0-e._1,0));return j.jsx(y,{scrubberRef:g,hasScrubber:f,audioEl:d,color:a,testid:"mw_audio_recorder",style:{cursor:f?"pointer":"default",borderRadius:"18px"},children:j.jsxs(l,{audioEl:d,children:[j.jsx(u,t),v,j.jsx(s,{outgoing:!0,ref:g}),j.jsx("div",{onMouseMove:f?h:void 0,className:(i||(i=b("stylex")))(J.playbackButtonContainer),children:j.jsx(p,{onPress:m,label:x,icon:z})}),j.jsx(n,{time:B,color:a})]})})}a=a;f.ScreenreaderLabel=c;f.KeyCommands=d;f.Timer=e;f.PlaybackButton=q;f.Highlight=t;f.Progress=v;f.Container=z;f.PlayIcon=B;f.StopIcon=D;f.PauseIcon=F;f.playLabel=G;f.stopLabel=H;f.pauseLabel=I;f.styles=J;f.make=a}),null);
__d("MWV2ComposerFileButton.bs",["fbt","CometFileSelector.re","CometPressable.react","MWChatComposerIcons.bs","MWTooltip.react","bs_caml_option","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j={button:{paddingTop:"ecm0bbzt",paddingEnd:"ph5uu5jm",paddingBottom:"e5nlhep0",paddingStart:"b3onmgus"}},k=g._(/*FBT_CALL*/"Attach a file"/*FBT_CALL*/);function l(a){return i.useCallback(function(c){c=Array.from(c);if(c.length>0)return b("bs_curry")._1(a,c)},[a])}function a(a){var c=a.color,d=a.onAttachmentsAdded,e=a.supportedFileTypes,f=a.disabled;a=l(d);d={children:function(a){return i.jsx(b("MWTooltip.react"),{tooltip:k,align:"middle",position:"above",children:i.jsx(b("CometPressable.react"),{"aria-label":k,disabled:f,testid:"composer_file_uploader",onPress:function(c){return b("bs_curry")._1(a,void 0)},overlayRadius:"50%",xstyle:function(a){return[j.button]},children:i.jsx(b("MWChatComposerIcons.bs").Photo.make,{size:20,fill:f?void 0:c})}),forceInlineDisplay:!0})},multiple:!0,onFilesSelected:a};e!==void 0&&(d.accept=b("bs_caml_option").valFromOption(e));return i.jsx(b("CometFileSelector.re").make,d)}c=a;f.label=k;f.useOnFilesSelected=l;f.make=c}),null);
__d("MWV2ComposerGifButton.bs",["fbt","CometLazyPopoverTrigger.react","CometPressable.react","JSResource","LSDict","MWChatComposerIcons.bs","MWTooltip.react","bs_caml_format","bs_caml_int64","bs_caml_option","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j={button:{paddingTop:"ecm0bbzt",paddingEnd:"ph5uu5jm",paddingBottom:"e5nlhep0",paddingStart:"b3onmgus"}},k=g._(/*FBT_CALL*/"Choose a gif"/*FBT_CALL*/);function l(a,c,d,e){return b("LSDict").fromObject({playable_url:void 0,playable_url_fallback:void 0,playable_url_expiration_timestamp_ms:void 0,playable_url_mime_type:void 0,preview_url:a,preview_url_fallback:void 0,preview_url_expiration_timestamp_ms:void 0,preview_url_mime_type:void 0,preview_width:d,preview_height:c})}function m(a){return i.useCallback(function(c){var d=b("bs_caml_format").caml_int64_of_string(c.platformFBID),e=c.source.url;return b("bs_curry").app(a,[void 0,void 0,void 0,void 0,d,e,b("bs_caml_option").some(l(e,b("bs_caml_int64").of_int32(c.source.height),b("bs_caml_int64").of_int32(c.source.width),void 0)),void 0,void 0,void 0,void 0])},[a])}function a(a){var c=a.color,d=a.onSendMessage,e=a.disabled;a=m(d);return i.jsx(b("CometLazyPopoverTrigger.react"),{popoverResource:b("JSResource")("MWChatAnimatedImageFlyout.react").__setRef("MWV2ComposerGifButton.bs"),disableAutoFlip:!0,popoverProps:{onSelect:b("bs_curry").__1(a),testid:"mw_gif_picker"},align:"middle",position:"above",children:function(a,d,f,g,h,l,m){return i.jsx(b("MWTooltip.react"),{tooltip:k,align:"middle",position:"above",children:i.jsx(b("CometPressable.react"),{"aria-label":k,disabled:e,ref:a,onHoverIn:b("bs_curry").__1(g),onHoverOut:function(a){return b("bs_curry")._1(h,void 0)},onPressIn:b("bs_curry").__1(l),onPress:function(a){return b("bs_curry")._1(d,void 0)},overlayRadius:"50%",xstyle:function(a){return[j.button]},children:i.jsx(b("MWChatComposerIcons.bs").Gif.make,{size:20,fill:e?void 0:c})}),forceInlineDisplay:!0})}})}c=a;f.label=k;f.useOnGifSelect=m;f.make=c}),null);
__d("MWV2ComposerStickerButton.bs",["fbt","CometLazyPopoverTrigger.react","CometPressable.react","JSResource","LSDict","MWChatComposerIcons.bs","MWTooltip.react","bs_belt_Option","bs_caml_format","bs_caml_option","bs_curry","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={button:{paddingTop:"ecm0bbzt",paddingEnd:"ph5uu5jm",paddingBottom:"e5nlhep0",paddingStart:"b3onmgus"},flyoutRoot:{width:"tjny6qan"}},l=g._(/*FBT_CALL*/"Choose a sticker"/*FBT_CALL*/);function m(a,c,d,e){return b("LSDict").fromObject({playable_url:void 0,playable_url_fallback:void 0,playable_url_expiration_timestamp_ms:void 0,playable_url_mime_type:void 0,preview_url:a,preview_url_fallback:void 0,preview_url_expiration_timestamp_ms:void 0,preview_url_mime_type:void 0,preview_width:d,preview_height:c})}function n(a,c){return j.useCallback(function(d){return function(e,f){e=f.animated_uri;e=b("bs_belt_Option").isSome(e)?e:f.uri;if(c)return b("bs_curry").app(a,[void 0,void 0,void 0,void 0,void 0,b("bs_belt_Option").getExn(e),void 0,void 0,void 0,void 0,void 0]);else return b("bs_curry").app(a,[void 0,void 0,b("bs_caml_format").caml_int64_of_string(d),void 0,void 0,void 0,b("bs_caml_option").some(m(e,[0,128],[0,128],void 0)),void 0,void 0,void 0,void 0])}},[a,c])}function a(a){var c=a.color,d=a.onSendMessage,e=a.disabled;a=a.useSecureSend;d=n(d,a);return j.jsx(b("CometLazyPopoverTrigger.react"),{onVisibilityChange:function(a){},popoverResource:b("JSResource")("MWChatStickersFlyoutForJSResource.react").__setRef("MWV2ComposerStickerButton.bs"),disableAutoFlip:!0,popoverProps:{className:(i||(i=b("stylex")))(k.flyoutRoot),onClose:function(a){},onStickerSelect:d,shouldHideDefaultPacks:a},align:"middle",position:"above",children:function(a,d,f,g,h,i,m){return j.jsx(b("MWTooltip.react"),{tooltip:l,align:"middle",position:"above",children:j.jsx(b("CometPressable.react"),{"aria-label":l,disabled:e,ref:a,testid:"chat_sticker_button",onHoverIn:b("bs_curry").__1(g),onHoverOut:function(a){return b("bs_curry")._1(h,void 0)},onPressIn:b("bs_curry").__1(i),onPress:function(a){return b("bs_curry")._1(d,void 0)},overlayRadius:"50%",xstyle:function(a){return[k.button]},children:j.jsx(b("MWChatComposerIcons.bs").Sticker.make,{size:20,fill:e?void 0:c})}),forceInlineDisplay:!0})}})}c=a;f.styles=k;f.label=l;f.useOnStickerSelect=n;f.make=c}),null);
__d("MWV2AudioPlayer.bs",["CometProgressRingIndeterminate.react","MWChatAudioLog.bs","MWConsole","MWLSThreadDisplayContext.bs","MWPThreadTheme.bs","MWV2ColorUtils.bs","MWV2ComposerVoiceRecorder.bs","Promise","bs_caml_int64","bs_caml_option","bs_curry","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");c=56;var j={common:{flexGrow:"buofh1pr",alignSelf:"ns4p8fja",display:"j83agx80",justifyContent:"i1fnvgqd",alignItems:"bp9cbjyn"},transparent:{position:"l9j0dhe7",height:"datstx6m",paddingTop:"jb3vyjys",paddingEnd:"rz4wbd8a",paddingBottom:"qt6c0cv9",paddingStart:"a8nywdso",overflowX:"ni8dbmo4",overflowY:"stjgntxs",":after":{content:"i6jr3soi",display:"k4aqvg2j",position:"g8e0jvg7",top:"geli4699",bottom:"fkq5d175",start:"oskkt2ky",end:"i4sm7uox",borderTopStyle:"fin0ypmt",borderEndStyle:"j10cs0yc",borderBottomStyle:"aw4oqepz",borderStartStyle:"fgzft9zi",borderTopWidth:"dzm1kfb5",borderEndWidth:"oc4jhviy",borderBottomWidth:"h624itt5",borderStartWidth:"reaovrpu",borderTopColor:"hwba8txa",borderEndColor:"dzgn2jm7",borderBottomColor:"n4g4bzxc",borderStartColor:"sdxs9vve",borderTopStartRadius:"cur584us",borderTopEndRadius:"gt092ec4",borderBottomEndRadius:"t02hhl22",borderBottomStartRadius:"lm2lsiji",pointerEvents:"yfudjqg5"}}};function k(a,b){if(typeof b==="number")if(typeof a==="number")return{TAG:0,_0:0};else return a;if(b.TAG===0)if(typeof a==="number")return a;else if(a.TAG===0)return{TAG:1,_0:a._0};else return{TAG:0,_0:b._0?0:a._0};b=b._0;if(typeof a==="number")return a;else if(a.TAG===0)return{TAG:0,_0:b};else return{TAG:1,_0:b}}function a(a){var c=a.attachment,d=a.getPlayableUrl;a=a.outgoing;var e=i.useReducer(k,0),f=e[1],g=e[0],l=b("bs_curry")._1(d,c);e=b("MWPThreadTheme.bs").useHook(void 0);d=a&&e.gradientColors.length>1;e=a?d?"transparent":b("MWV2ColorUtils.bs").int64ToHex(e.threadTheme.c):"var(--wash)";var m=g!==0,n=b("MWLSThreadDisplayContext.bs").useHook(void 0);n={cursor:m?"pointer":"default",width:n!==void 0&&n?"218px":"180px"};var o=d?void 0:"18px";o!==void 0&&(n.borderRadius=o);o=n;var p=i.useRef(void 0);i.useEffect(function(){if(l===void 0)return;var a=new Audio(l),c=function(a){a=p.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a).currentTime;return f({TAG:1,_0:a})},d=function(c){p.current=b("bs_caml_option").some(a);return f(0)},e=function(a){return f({TAG:0,_0:!0})};a.addEventListener("canplay",d);a.addEventListener("timeupdate",c);a.addEventListener("ended",e);return function(b){a.removeEventListener("canplay",d),a.removeEventListener("timeupdate",c),a.removeEventListener("ended",e),a.pause()}},[l]);n=function(a){a=p.current;if(a===void 0)return f({TAG:0,_0:!1});a=b("bs_caml_option").valFromOption(a);if(typeof g==="number")return f({TAG:0,_0:!1});if(g.TAG===0){a.play().then(function(a){f({TAG:0,_0:!1});return b("Promise").resolve(void 0)})["catch"](function(a){b("MWChatAudioLog.bs").logBrowserDenyAccess(void 0);return b("Promise").resolve(void 0)});return}a.pause();return f({TAG:0,_0:!1})};var q=b("MWPThreadTheme.bs").useBottom(void 0);c=c.bd;c=c!==void 0?b("bs_caml_int64").to_float(c)/1e3:0;var r=i.useRef(void 0),s=function(a){var b=r.current;if(!(b==null)){a.stopPropagation();return b.updateHighlight(0)}},t=p.current,u;u=typeof g==="number"||g.TAG===0?!1:!0;var v;v=typeof g==="number"||g.TAG!==0?!1:g._0===0;t={duration:t!==void 0?b("bs_caml_option").valFromOption(t).duration:0,audioEl:p,isProgressing:u,isCompleted:v,outgoing:a};u=typeof g==="number"?void 0:g._0;u!==void 0&&(t.currentTime=b("bs_caml_option").valFromOption(u));if(g===0)v=i.jsx("div",{onMouseMove:m?s:void 0,className:(h||(h=b("stylex")))(b("MWV2ComposerVoiceRecorder.bs").styles.playbackButtonContainer,b("MWV2ComposerVoiceRecorder.bs").PlaybackButton.styles.pressable),children:i.jsx(b("CometProgressRingIndeterminate.react"),{color:"disabled",size:16})});else{u=typeof g==="number"||g.TAG===0?b("MWV2ComposerVoiceRecorder.bs").playLabel:b("MWV2ComposerVoiceRecorder.bs").pauseLabel;var w;if(typeof g==="number")w=null;else if(g.TAG===0){var x={},y=a?q:void 0;y!==void 0&&(x.color=b("bs_caml_option").valFromOption(y));w=i.jsx(b("MWV2ComposerVoiceRecorder.bs").PlayIcon.make,x)}else{y={};x=a?q:void 0;x!==void 0&&(y.color=b("bs_caml_option").valFromOption(x));w=i.jsx(b("MWV2ComposerVoiceRecorder.bs").PauseIcon.make,y)}x={label:u,icon:w};y=g===0?void 0:n;y!==void 0&&(x.onPress=b("bs_caml_option").valFromOption(y));v=i.jsx("div",{onMouseMove:m?s:void 0,className:(h||(h=b("stylex")))(b("MWV2ComposerVoiceRecorder.bs").styles.playbackButtonContainer),children:i.jsx(b("MWV2ComposerVoiceRecorder.bs").PlaybackButton.make,x)})}u={time:typeof g==="number"?0:Math.max(c-g._0,0)};w=a?q:void 0;w!==void 0&&(u.color=b("bs_caml_option").valFromOption(w));return i.jsx(b("MWV2ComposerVoiceRecorder.bs").KeyCommands.make,{audioEl:p,children:i.jsx(b("MWV2ComposerVoiceRecorder.bs").Container.make,{scrubberRef:r,hasScrubber:m,audioEl:p,color:e,testid:"mw_audio_player",style:o,children:i.jsxs("div",{className:(h||(h=b("stylex")))(j.common,d?j.transparent:!1),children:[i.jsx(b("MWV2ComposerVoiceRecorder.bs").Progress.make,t),typeof g==="number"?null:i.jsx(b("MWV2ComposerVoiceRecorder.bs").ScreenreaderLabel.make,{currentTime:g._0,duration:c}),i.jsx(b("MWV2ComposerVoiceRecorder.bs").Highlight.make,{outgoing:a,ref:r}),v,i.jsx(b("MWV2ComposerVoiceRecorder.bs").Timer.make,u)]})})})}d=36;e=a;f.borderWidth=d;f.borderRadius=c;f.styles=j;f.reducer=k;f.make=e}),null);/*FB_PKG_DELIM*/
__d("MWV2ChatDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";d("react");a=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWV2Chat.react").__setRef("MWV2ChatDeferred.react"));b=a;g["default"]=b}),98);
__d("MWChatStateV2Logging.bs",["MWCount.bs","MessengerWebEvent","MessengerWebEventsFalcoEvent.bs","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=h.useRef(a);h.useEffect(function(){var a=Array.from(c.current.tabs.values()),d=function(a){return a.openWatermark>Math.max(a.closeWatermark,a.minimizeWatermark,a.clientForcedMinimizeWatermark)},e=function(a){return Math.max(a.minimizeWatermark,a.clientForcedMinimizeWatermark)>Math.max(a.openWatermark,a.closeWatermark)},f=a.filter(d);d=a.filter(e);f.length>0?(b("bs_curry")._1(b("MWCount.bs").Comet.Cookie.Lift.one,void 0),b("MessengerWebEventsFalcoEvent.bs").log(function(){return{event_name:b("MessengerWebEvent").LOAD_TAB_FROM_COOKIE,extra_data:{tabNumber:f.length}}})):b("bs_curry")._1(b("MWCount.bs").Comet.Cookie.Lift.none,void 0);d.length>0?b("bs_curry")._1(b("MWCount.bs").Comet.Cookie.Show.some,void 0):b("bs_curry")._1(b("MWCount.bs").Comet.Cookie.Show.none,void 0)},[c])}f.useCookieLiftLogging=a}),null);
__d("MWChatStateV2Sync.bs",["BroadcastChannel.bs","MWChatStateV2IsMinimized.bs","MWChatStateV2IsOpen.bs","MWLSActor.bs","bs_caml_format","bs_caml_option","bs_curry","bs_int64","gkx","react","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){if(a!==void 0){b("bs_caml_option").valFromOption(a).postMessage(c);return}}function j(a,c){if(a===void 0)return function(a){};var d=b("bs_caml_option").valFromOption(a),e=function(a){return b("bs_curry")._1(c,a.data)};d.addEventListener("message",e);return function(a){d.removeEventListener("message",e)}}function k(a){var c=b("MWLSActor.bs").useActor(void 0);return h.useMemo(function(){return b("BroadcastChannel.bs").make("MWChatStateV2_"+b("bs_int64").to_string(c))},[c])}function l(a){a=Array.from(a.tabs.values());var c=[];a.forEach(function(a){var d=a.tabType;if(d.TAG===0)return;d=d._0;c.push({threadKey:b("bs_int64").to_string(d.threadKey),threadType:b("bs_int64").to_string(d.threadType),openWatermark:a.openWatermark,closeWatermark:a.closeWatermark})});return c}function m(a,c,d){return[{TAG:3,_0:{TAG:1,_0:{threadKey:a,clientThreadKey:void 0,threadType:c}},_1:{shouldFocus:!1},_2:function(a){if(b("MWChatStateV2IsOpen.bs").isOpen(void 0,a))return a;else return{tabId:a.tabId,tabType:a.tabType,openWatermark:a.openWatermark,minimizeWatermark:d,clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:a.closeWatermark,openFlyoutWatermark:a.openFlyoutWatermark}},_3:function(a){return{tabId:a.tabId,tabType:a.tabType,openWatermark:a.openWatermark,minimizeWatermark:d,clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:a.closeWatermark,openFlyoutWatermark:a.openFlyoutWatermark}}}]}function n(a,c){return[{TAG:2,_0:a,_1:{shouldFocus:!1},_2:function(a){if(b("MWChatStateV2IsMinimized.bs").isMinimized(void 0,a))return{tabId:a.tabId,tabType:a.tabType,openWatermark:a.openWatermark,minimizeWatermark:a.minimizeWatermark,clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:c,openFlyoutWatermark:a.openFlyoutWatermark};else return a}}]}function a(a,c,d,e){var f=k(void 0);h.useEffect(function(){if(d){b("bs_curry")._1(e,function(a){return!1});var c=l(a);i(f,c)}},[a,f,d]);h.useEffect(function(){return j(f,function(a){try{a.forEach(function(a){var d=b("bs_caml_format").caml_int64_of_string(a.threadKey),e=b("bs_caml_format").caml_int64_of_string(a.threadType),f=a.closeWatermark;a=a.openWatermark;if(a>f)return b("bs_curry")._1(c,m(d,e,a));else return b("bs_curry")._1(c,n(d,f))});return}catch(a){b("recoverableViolation")("Cross-tab sync error","messenger_comet");return}})},[f,c])}c=b("gkx")("1812710")?a:function(a,b,c,d){};f.useCrossTabSync=c}),null);
__d("MWChatStateV2Types.bs",[],(function(a,b,c,d,e,f){"use strict";a=new Map();b={tabs:a,mediaViewerOpenWatermark:-1,focusedTabId:void 0,nextTabId:0};f.empty=b}),null);
__d("MWV2CookieReader.bs",["MWChatStateV2Types.bs","MessagingThreadType.bs","bs_caml","bs_caml_format","bs_caml_option","bs_int64","gkx","killswitch","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){a=a.split(".");var c=a.length,d;if(c>=3)d=[void 0,void 0];else switch(c){case 0:d=[void 0,void 0];break;case 1:c=a[0];d=[c,void 0];break;case 2:c=a[0];a=a[1];d=/^-?[1-9]\d*$/.test(a)?[c,b("bs_caml_format").caml_int64_of_string(a)]:[void 0,void 0];break}c=d[1];a=d[0];if(a===void 0)return;switch(a){case"g":if(c!==void 0)return[c,b("MessagingThreadType.bs").group];else return;case"sc":if(c!==void 0)return[c,b("MessagingThreadType.bs").secureMessageOverWaOneToOne];else return;case"sg":if(c!==void 0)return[c,b("MessagingThreadType.bs").secureMessageOverWaGroup];else return;default:if(c!==void 0)return[c,b("MessagingThreadType.bs").oneToOne];else return}}function h(a){var c=a.map(function(a){return b("bs_int64").to_string(a[0])});c=new Set(c);if(c.size!==a.length){b("recoverableViolation")("Duplicate thread in cookie (t3)","messenger_comet");return a.filter(function(a,c,d){var e=a[0];return!d.slice(c+1|0).some(function(a){return b("bs_caml").i64_eq(a[0],e)})})}else return a}function a(a){if(a==null)return b("MWChatStateV2Types.bs").empty;if(!(!b("killswitch")("MESSENGER_WEB_STOP_PERSISTING_CHAT_HEADS")&&b("gkx")("1812641")&&a.startsWith("C")))return b("MWChatStateV2Types.bs").empty;a=a.slice(1);try{a=JSON.parse(a)}catch(c){b("recoverableViolation")("Error parsing JSON string","messenger_comet"),a=null}if(a===null)return b("MWChatStateV2Types.bs").empty;var c=[];a.t3.forEach(function(a){a=a.i;a=g(a);if(a!==void 0){c.push(a);return}});var d=h(c),e=new Map(),f={contents:0};d.forEach(function(a){e.set(f.contents,{tabId:f.contents,tabType:{TAG:1,_0:{threadKey:a[0],clientThreadKey:void 0,threadType:a[1]}},openWatermark:0,minimizeWatermark:1,clientForcedMinimizeWatermark:0,closeWatermark:0,openFlyoutWatermark:0}),f.contents=f.contents+1|0});a=a.lm3;if(a!==void 0){a=g(b("bs_caml_option").valFromOption(a));if(a!==void 0){var i=a[0];d.some(function(a){return b("bs_caml").i64_eq(a[0],i)})?b("recoverableViolation")("Duplicate thread in cookie (lm3)","messenger_comet"):e.set(f.contents,{tabId:f.contents,tabType:{TAG:1,_0:{threadKey:i,clientThreadKey:void 0,threadType:a[1]}},openWatermark:1,minimizeWatermark:0,clientForcedMinimizeWatermark:0,closeWatermark:0,openFlyoutWatermark:0});f.contents=f.contents+1|0}}return{tabs:e,mediaViewerOpenWatermark:-1,focusedTabId:void 0,nextTabId:f.contents}}f.read=a}),null);
__d("MWChatStateV2.bs",["FBLogger","MWChatStateV2IsOpen.bs","MWChatStateV2Logging.bs","MWChatStateV2Sync.bs","MWChatStateV2Types.bs","MWV2CookieReader.bs","MessengerWebPresenceCookieData","RecoverableViolationWithComponentStack.react","bs_caml","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){a=Array.from(a.tabs.values()).find(function(a){a=a.tabType;if(a.TAG===0)if(c.TAG===0)return!0;else return!1;else if(c.TAG===0)return!1;else return b("bs_caml").i64_eq(a._0.threadKey,c._0.threadKey)});if(a!==void 0)return a.tabId}function j(a,c){a=Array.from(a.tabs.values()).find(function(a){a=a.tabType;if(a.TAG===0)return c===void 0;else if(c!==void 0)return b("bs_caml").i64_eq(a._0.threadKey,c);else return!1});if(a!==void 0)return a.tabId}function k(a,c,d){if(d)if(b("MWChatStateV2IsOpen.bs").isOpen(void 0,c))return c.tabId;else return;d=a.focusedTabId;if(d!==void 0&&d===c.tabId&&!b("MWChatStateV2IsOpen.bs").isOpen(void 0,c))return;else return a.focusedTabId}function l(a,b){return b.reduce(function(a,b){b=b;while(!0){var c=b;switch(c.TAG|0){case 0:return c._0(a);case 1:var d=c._0,e=a.tabs.get(d);if(e==null)return a;var f=c._2(e),g=k(a,f,c._1.shouldFocus);if(f===e)return a;else return{tabs:new Map(a.tabs).set(d,f),mediaViewerOpenWatermark:a.mediaViewerOpenWatermark,focusedTabId:g,nextTabId:a.nextTabId};case 2:e=j(a,c._0);if(e===void 0)return a;b={TAG:1,_0:e,_1:c._1,_2:c._2};continue;case 3:d=c._1;f=c._0;g=i(a,f);if(g!==void 0){b={TAG:1,_0:g,_1:d,_2:c._2};continue}e=a.nextTabId;g={tabId:e,tabType:f,openWatermark:0,minimizeWatermark:0,clientForcedMinimizeWatermark:0,closeWatermark:0,openFlyoutWatermark:0};e=c._3(g);f=k(a,e,d.shouldFocus);return{tabs:new Map(a.tabs).set(e.tabId,e),mediaViewerOpenWatermark:a.mediaViewerOpenWatermark,focusedTabId:f,nextTabId:a.nextTabId+1|0}}}},a)}function m(a){return b("MWV2CookieReader.bs").read(b("MessengerWebPresenceCookieData").cookie)}var n=h.createContext(b("MWChatStateV2Types.bs").empty),o=h.createContext(void 0);function a(a){a=a.children;var c=h.useReducer(l,b("MWChatStateV2Types.bs").empty,m),d=c[1];c=c[0];var e=h.useState(function(){return!1}),f=e[1],g=h.useCallback(function(a){b("bs_curry")._1(f,function(a){return!0});return b("bs_curry")._1(d,a)},[]);b("MWChatStateV2Logging.bs").useCookieLiftLogging(c);b("MWChatStateV2Sync.bs").useCrossTabSync(c,d,e[0],f);e=h.useContext(o);if(e!==void 0)return h.jsx(b("RecoverableViolationWithComponentStack.react"),{errorMessage:"You can't nest MWChatStateV2 in another MWChatStateV2.",projectName:"messenger_comet"});else return h.createElement(n.Provider,{value:c,children:h.createElement(o.Provider,{value:g,children:a})})}function c(a){a=h.useContext(o);if(a!==void 0)return a;else return function(a){b("FBLogger")("messenger_web_product").warn("Tried to open a chat tab on Comet under the new chat state system, MWChatStateV2. But no MWChatStateV2 was found in react context. Wrap your component in MWChatStateV2? You are likely also be part of Blue on Comet. If so do ping our oncall")}}function d(a){return h.useContext(n)}e=a;f.reducer=l;f.make=e;f.useDispatch=c;f.useState=d}),null);
__d("MWV2ChatOpenTabForPage.bs",["MWChatInteraction.bs","MWChatStateActions.bs","MWChatStateV2.bs","MessagingThreadType.bs","bs_caml_format","bs_curry","react","recoverableViolation","requireDeferred","useCometFeedNoRoutingNavigationEventLogger","useMWChatOpenTabTraceProvider"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("requireDeferred")("MWChatLogOpenChatTab.bs").__setRef("MWV2ChatOpenTabForPage.bs");function a(a,c){var d=a!==void 0?a:!1,e=b("useMWChatOpenTabTraceProvider")(),f=b("useCometFeedNoRoutingNavigationEventLogger")(),g=b("MWChatStateV2.bs").useDispatch(void 0);return h.useMemo(function(){return function(a,h){f(Date.now(),"","messenger");i.onReady(function(d){return b("bs_curry")._4(d.logOpenPageTab,void 0,a,c,void 0)});return e(function(c){b("MWChatInteraction.bs").set(a,c);if(h){b("recoverableViolation")("Opening secure converstions with pages not supported","messenger_web_product");return}else return b("bs_curry")._1(g,b("MWChatStateActions.bs").openTab(Date.now(),{shouldFocus:!d},{TAG:1,_0:{threadKey:b("bs_caml_format").caml_int64_of_string(a),clientThreadKey:void 0,threadType:b("MessagingThreadType.bs").oneToOne}}))},"page",c)}},[f,e,d,c])}f.$MWChatLogOpenChatTab$Deferred=i;f.useHook=a}),null);
__d("MWV2ChatOpenTabForUser.bs",["MWChatInteraction.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWLSPreloadThreadForContact.bs","MessagingThreadType.bs","bs_caml_format","bs_curry","react","requireDeferred","useCometFeedNoRoutingNavigationEventLogger","useMWChatOpenTabTraceProvider"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("requireDeferred")("MWChatLogOpenChatTab.bs").__setRef("MWV2ChatOpenTabForUser.bs"),j=b("requireDeferred")("MWV2ChatOpenSecureTabForUserCallback.bs").__setRef("MWV2ChatOpenTabForUser.bs");function a(a,c){var d=a!==void 0?a:!1,e=b("useMWChatOpenTabTraceProvider")(),f=b("useCometFeedNoRoutingNavigationEventLogger")();a=b("MWLSPreloadThreadForContact.bs").usePreloaderForUser();var g=b("MWChatStateV2.bs").useDispatch(void 0),k=h.useMemo(function(){return function(a,h){f(Date.now(),"","messenger");i.onReady(function(d){return b("bs_curry")._4(d.logOpenUserTab,h,a,c,void 0)});return e(function(c){b("MWChatInteraction.bs").set(a,c);if(h===!0){j.onReady(function(c){return b("bs_curry")._3(c.openChatTab,a,d,g)});return}else return b("bs_curry")._1(g,b("MWChatStateActions.bs").openTab(Date.now(),{shouldFocus:!d},{TAG:1,_0:{threadKey:b("bs_caml_format").caml_int64_of_string(a),clientThreadKey:void 0,threadType:b("MessagingThreadType.bs").oneToOne}}))},"user",c)}},[f,e,d,c]);return[k,a]}f.$MWChatLogOpenChatTab$Deferred=i;f.$MWV2ChatOpenSecureTabForUserCallback$Deferred=j;f.useHook=a}),null);
__d("MWChatStateV2.re",["MWChatStateV2.bs"],(function(a,b,c,d,e,f){a=b("MWChatStateV2.bs").make;f.make=a}),null);
__d("MWChatStateV2AreAllTabsClosed.bs",["MWChatStateV2.bs","MWChatStateV2IsClosed.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("MWChatStateV2.bs").useState(function(a){return a.tabs});a=Array.from(a.tabs.values());var c=a.length;a=a.filter(b("MWChatStateV2IsClosed.bs").isClosed).length;return a===c}f.useHook=a}),null);
__d("MWChatStateV2AreAllTabsClosed.re",["MWChatStateV2AreAllTabsClosed.bs"],(function(a,b,c,d,e,f){a=b("MWChatStateV2AreAllTabsClosed.bs").useHook;f.useHook=a}),null);
__d("MWSelectedThreadOptionsIdContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext(void 0);function a(a){var b=a.children;a=a.threadId;return h.createElement(i.Provider,{value:a,children:b})}c=a;f.context=i;f.make=c}),null);/*FB_PKG_DELIM*/
__d("MWV2ComposerHasContentContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext({hasContentRef:void 0,shouldClearDraftMessageRef:void 0});function a(a){a=a.children;var b=h.useRef(!1),c=h.useRef(!1),d=h.useMemo(function(){return{hasContentRef:b,shouldClearDraftMessageRef:c}},[b,c]);return h.createElement(i.Provider,{value:d,children:a})}function c(a){return h.useContext(i)}d=a;f.make=d;f.useContext=c}),null);
__d("UseMWV2CloseTab.bs",["MWChatConfirmTabCloseDialog.bs","MWChatEphemeralMediaTemporarySeenState.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWV2ComposerHasContentContext.bs","ReStore.bs","bs_curry","bs_int64","react","useCometConfirmationDialog"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c){var d=b("ReStore.bs").useHook(void 0),e=b("MWChatStateV2.bs").useDispatch(void 0),f=b("useCometConfirmationDialog")(),g=f[0];f=b("MWV2ComposerHasContentContext.bs").useContext(void 0);var i=f.shouldClearDraftMessageRef,j=f.hasContentRef;return h.useCallback(function(d){var f=function(d){a!==void 0&&b("MWChatEphemeralMediaTemporarySeenState.bs").endSession(b("bs_int64").to_string(a.a));return b("bs_curry")._1(e,b("MWChatStateActions.bs").closeTab(Date.now(),c.tabId))};if(a!==void 0&&j!==void 0&&j.current)return b("bs_curry")._3(g,b("MWChatConfirmTabCloseDialog.bs").content,function(a){i!==void 0&&(i.current=!0);return f(void 0)},function(a){if(i!==void 0){i.current=!1;return}});else return f(void 0)},[a,c,d,e,g,j,i])}f.useHook=a}),null);
__d("MWV2ChatOpenTabFromNewMessage.bs",["LSThreadAttributionStore.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWChatThreadId.bs","ODS","bs_curry","react","setTimeout","useCometFeedNoRoutingNavigationEventLogger"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useCometFeedNoRoutingNavigationEventLogger")(),d=b("MWChatStateV2.bs").useDispatch(void 0);return h.useCallback(function(e){return function(f,g){c(Date.now(),"","messenger");b("ODS").bumpEntityKey(3185,"mwchat_tab","open_incoming");b("LSThreadAttributionStore.bs").setSource(b("MWChatThreadId.bs").getFBID(e),a);var h=Date.now();b("bs_curry")._1(d,b("MWChatStateActions.bs").openTabOrFlyout(h,{shouldFocus:!1},{TAG:1,_0:{threadKey:f.a,clientThreadKey:void 0,threadType:f.c}}));b("setTimeout")(function(a){return b("bs_curry")._1(d,b("MWChatStateActions.bs").closeFlyout(h,f.a))},3e3);return b("bs_curry")._1(g,void 0)}},[c,a,d])}f.useHook=a}),null);
__d("MWV2HeaderCloseButton.bs",["fbt","CometPressable.react","MWTooltip.react","bs_caml_option","react","useSetAttributeRef"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j=g._(/*FBT_CALL*/"Close chat"/*FBT_CALL*/);function a(a){var c=a.onPress,d=a.color,e=a.label;a=a.testid;e=e!==void 0?e:j;var f=b("useSetAttributeRef")("data-prevent_chattab_focus","1");f={"aria-label":e,ref:f,onPress:c,overlayRadius:"50%",children:i.jsx("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",children:i.jsxs("g",{strokeLinecap:"round",strokeWidth:"2",stroke:d,children:[i.jsx("line",{x1:"6",x2:"18",y1:"6",y2:"18"}),i.jsx("line",{x1:"6",x2:"18",y1:"18",y2:"6"})]})})};a!==void 0&&(f.testid=b("bs_caml_option").valFromOption(a));return i.jsx(b("MWTooltip.react"),{tooltip:e,align:"middle",position:"above",children:i.jsx(b("CometPressable.react"),f)})}c=a;f.defaultLabel=j;f.make=c}),null);
__d("MWV2HeaderContainer.bs",["MDSRow.react","bs_caml_option","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{position:"l9j0dhe7",display:"j83agx80",flexShrink:"pfnyh3mw",justifyContent:"i1fnvgqd",alignItems:"bp9cbjyn",overflowX:"ni8dbmo4",overflowY:"stjgntxs",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",backgroundColor:"nred35xi",height:"k7cz35w2",zIndex:"kavbgo14"},divider:{boxShadow:"rlauoc8d"}};function a(a){var c=a.startContent,d=a.endContent,e=a.backgroundColor;a=a.divider;c=c!==void 0?b("bs_caml_option").valFromOption(c):null;d=d!==void 0?b("bs_caml_option").valFromOption(d):null;a=a!==void 0?a:!0;var f={};e!==void 0&&(f.backgroundColor=e);return i.jsxs("div",{className:(h||(h=b("stylex")))(j.root,a?j.divider:!1),style:f,children:[i.jsx(b("MDSRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",expanding:!0,children:c}),d]})}c=a;f.styles=j;f.make=c}),null);
__d("MWV2EnsureThatChatTabExists.bs",["LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSDatabaseType.bs","LSMessagingThreadTypeUtil.bs","LSTransaction.bs","LSVerifyContactRowExists","LSVerifyThreadRowExists","Promise","ReStore.bs","bs_curry","cr:1127","promiseDone","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c){var d=b("ReStore.bs").useHook(void 0);h.useEffect(function(){var e=function(e){if(b("LSMessagingThreadTypeUtil.bs").isOneToOne(c))return b("LSTransaction.bs").run(d,function(c){return b("LSVerifyContactRowExists")(a,b("LSContactIdType.bs").fbid,void 0,void 0,b("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,b("LSContactBlockedByViewerStatus.bs").unblocked,void 0,!1,b("LSAuthorityLevel.bs").clientPartial,void 0,b("LSContactWorkForeignEntityType.bs").unknown,b("LSContactGender.bs").unknown,b("LSContactViewerRelationship.bs").unknown,void 0,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");else return b("Promise").resolve(void 0)};b("promiseDone")(e(void 0).then(function(e){return!(b("cr:1127")==null)&&b("LSMessagingThreadTypeUtil.bs").isSecure(c)?b("bs_curry")._2(b("cr:1127").call,d,a):b("LSTransaction.bs").run(d,function(d){return b("LSVerifyThreadRowExists")(a,c,b("LSDatabaseType.bs").mailbox,b("bs_curry")._1(b("LS.bs").make,d))},"readWrite")}),void 0,void 0)},[d,JSON.stringify(a),JSON.stringify(c)])}c=b("cr:1127");f.$MAWVerifyExistingThreadExists$requireCondXplat=b("cr:1127");f.mawVerifyExistingThreadExists=c;f.useHook=a}),null);
__d("MWV2TabContainer.bs",["MWChatFocusComposerContext.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWChatTabFocusHandler.bs","UseMWV2CloseTab.bs","bs_curry","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={tabContainer:{backgroundColor:"nred35xi",boxShadow:"eu4i7hue",borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",fontSize:"jq4qci2q",lineHeight:"a3bd9o3v",display:"j83agx80",flexDirection:"cbu4d94t",width:"jbcpqwzg",height:"kwja4m9d",maxHeight:"j8pehd6c","@media (min-height: 1280px)":{height:"l8e2pc74"},marginStart:"i0u1bx94"}};function a(a){var c=a.tab,d=a.thread,e=a.style,f=a.tabIndex,g=a.ariaBusy,k=a.ariaLabel,l=a.domRef;a=a.children;var m=b("MWChatStateV2.bs").useDispatch(void 0),n=b("UseMWV2CloseTab.bs").useHook(d,c);return i.jsx(b("MWChatFocusComposerContext.bs").provider,{children:i.jsx(b("MWChatTabFocusHandler.bs").make,{onEscape:function(a){return b("bs_curry")._1(n,void 0)},onFocus:function(a){return b("bs_curry")._1(m,b("MWChatStateActions.bs").focusTab(c.tabId))},onBlur:function(a){return b("bs_curry")._1(m,b("MWChatStateActions.bs").blurTab(void 0))},children:i.jsx("div",{className:(h||(h=b("stylex")))(j.tabContainer),style:e,tabIndex:f,"aria-busy":g,"aria-label":k,ref:l,"data-testid":"mwchat-tab",children:a})})})}c=a;f.styles=j;f.make=c}),null);/*FB_PKG_DELIM*/
__d("MWCommonSetup.bs",["Promise","bs_caml_option","bs_curry","cr:2073","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g=b("cr:2073")==null?void 0:b("bs_caml_option").some(b("cr:2073")),h={contents:!1};function a(a){if(h.contents!==!1)return;h.contents=!0;a=b("cr:2073")==null?b("Promise").resolve(!0):b("bs_curry")._1(g.acquireLocks,void 0);b("promiseDone")(a,void 0,void 0)}f.$MWSetupLock$requireCond=b("cr:2073");f.isSetupExecuted=h;f.make=a}),null);
__d("MWCommonSetup.re",["MWCommonSetup.bs"],(function(a,b,c,d,e,f){a=b("MWCommonSetup.bs").make;f.make=a}),null);
__d("MWV2IsTabFocusedContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext(!1);function a(a){var b=a.children;a=a.isFocused;return h.createElement(i.Provider,{value:a,children:b})}function c(a){return h.useContext(i)}d=a;f.make=d;f.useContext=c}),null);